<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Blow Out the Candle</title>
<style>
       body { text-align: center; background: black; color: white; font-family: Arial, sans-serif; }
       #cake { width: 200px; margin-top: 50px; position: relative; }
       .candle { width: 20px; height: 60px; background: red; position: absolute; top: -60px; left: 90px; border-radius: 5px; }
       .flame { width: 20px; height: 30px; background: orange; border-radius: 50%;
           position: absolute; top: -30px; left: 0;
           animation: flicker 0.2s infinite alternate; }
       @keyframes flicker { 0% { transform: scale(1); background: orange; } 100% { transform: scale(1.1); background: yellow; } }
</style>
</head>
<body>
<h1>ðŸŽ‚ Blow out the candle!</h1>
<p>(Click on the candle or blow into the mic!)</p>
<div id="cake">
<img src="https://i.imgur.com/J2DbrLQ.png" width="200" alt="Cake">
<div class="candle">
<div class="flame" id="flame"></div>
</div>
</div>
<audio id="birthdaySong" src="your-happy-birthday-song.mp3"></audio>
<script>
       function blowCandle() {
           let flame = document.getElementById("flame");
           flame.style.transition = "opacity 1s";
           flame.style.opacity = "0";
           setTimeout(() => flame.style.display = "none", 1000);
           document.getElementById("birthdaySong").play();
           setTimeout(() => {
               window.location.href = "surprise.html";
           }, 4000);
       }
       document.getElementById("cake").addEventListener("click", blowCandle);
       // Optional: Blow with microphone
       navigator.mediaDevices.getUserMedia({ audio: true }).then(stream => {
           const audioContext = new AudioContext();
           const analyser = audioContext.createAnalyser();
           const microphone = audioContext.createMediaStreamSource(stream);
           microphone.connect(analyser);
           analyser.fftSize = 256;
           const dataArray = new Uint8Array(analyser.frequencyBinCount);
           function detectBlow() {
               analyser.getByteFrequencyData(dataArray);
               let sum = dataArray.reduce((a, b) => a + b, 0);
               if (sum > 20000) { blowCandle(); }
               requestAnimationFrame(detectBlow);
           }
           detectBlow();
       });
</script>
</body>
</html>
